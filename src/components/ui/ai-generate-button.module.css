/* src/components/ui/ai-generate-button.module.css */

.btnWrapper {
    position: relative;
    display: inline-block;
}

.btn {
    --border-radius: 24px;
    --padding: 4px;
    --transition: 0.4s;
    --button-color: #101010;
    /* Default Blue (Generating/Idle) */
    --highlight-color-hue: 210deg;

    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.5em 0.5em 0.5em 1.1em;
    font-family: "Poppins", "Inter", "Segoe UI", sans-serif;
    font-size: 0.875rem;
    /* adjusted for compact fit */
    font-weight: 500;

    background-color: var(--button-color);
    color: white;

    box-shadow:
        inset 0px 1px 1px rgba(255, 255, 255, 0.2),
        inset 0px 2px 2px rgba(255, 255, 255, 0.15),
        inset 0px 4px 4px rgba(255, 255, 255, 0.1),
        inset 0px 8px 8px rgba(255, 255, 255, 0.05),
        inset 0px 16px 16px rgba(255, 255, 255, 0.05),
        0px -1px 1px rgba(0, 0, 0, 0.02),
        0px -2px 2px rgba(0, 0, 0, 0.03),
        0px -4px 4px rgba(0, 0, 0, 0.05),
        0px -8px 8px rgba(0, 0, 0, 0.06),
        0px -16px 16px rgba(0, 0, 0, 0.08);

    border: solid 1px rgba(255, 255, 255, 0.133);
    border-radius: var(--border-radius);
    cursor: pointer;

    transition:
        box-shadow var(--transition),
        border var(--transition),
        background-color var(--transition);

    height: 42px;
    /* Fixed height for consistency */
}

/* Modifiers for states */
.btn.success {
    --highlight-color-hue: 142deg;
    /* Green */
    border-color: hsla(142deg, 100%, 70%, 0.5);
    background-color: hsla(142deg, 50%, 20%, 0.2);
    box-shadow: 0 0 10px hsla(142deg, 100%, 50%, 0.2);
}

.btn.error {
    --highlight-color-hue: 0deg;
    /* Red */
    border-color: hsla(0deg, 100%, 70%, 0.5);
    background-color: hsla(0deg, 50%, 20%, 0.2);
    box-shadow: 0 0 10px hsla(0deg, 100%, 50%, 0.2);
}

.btn.success .btnSvg,
.btn.error .btnSvg {
    fill: #fff;
    filter: drop-shadow(0 0 5px hsl(var(--highlight-color-hue), 100%, 60%));
}

.btn.success .btnLetter,
.btn.error .btnLetter {
    color: #fff;
    text-shadow: 0 0 5px hsl(var(--highlight-color-hue), 100%, 60%);
}

.btn::before {
    content: "";
    position: absolute;
    top: calc(0px - var(--padding));
    left: calc(0px - var(--padding));
    width: calc(100% + var(--padding) * 2);
    height: calc(100% + var(--padding) * 2);
    border-radius: calc(var(--border-radius) + var(--padding));
    pointer-events: none;
    background-image: linear-gradient(0deg, #0004, #000a);

    z-index: -1;
    transition:
        box-shadow var(--transition),
        filter var(--transition);
    box-shadow:
        0 -8px 8px -6px #0000 inset,
        0 -16px 16px -8px #00000000 inset,
        1px 1px 1px rgba(255, 255, 255, 0.133),
        2px 2px 2px rgba(255, 255, 255, 0.067),
        -1px -1px 1px rgba(0, 0, 0, 0.133),
        -2px -2px 2px rgba(0, 0, 0, 0.067);
}

.btn::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    pointer-events: none;
    background-image: linear-gradient(0deg,
            #fff,
            hsl(var(--highlight-color-hue), 100%, 70%),
            hsla(var(--highlight-color-hue), 100%, 70%, 50%),
            8%,
            transparent);
    background-position: 0 0;
    opacity: 0;
    transition:
        opacity var(--transition),
        filter var(--transition);
}

.btnLetter {
    position: relative;
    display: inline-block;
    color: rgba(255, 255, 255, 0.33);
    transition:
        color var(--transition),
        text-shadow var(--transition),
        opacity var(--transition);
}

/* Animation only active during 'loading' state or hover */
.btn.loading .btnLetter {
    animation: letter-anim 2s ease-in-out infinite;
}

@keyframes letter-anim {
    50% {
        text-shadow: 0 0 3px rgba(255, 255, 255, 0.533);
        color: #fff;
    }
}

.btnSvg {
    flex-grow: 1;
    height: 20px;
    width: 20px;
    margin-right: 0.5rem;
    fill: #e8e8e8;
    filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.6));
    transition:
        fill var(--transition),
        filter var(--transition),
        opacity var(--transition);
}

.btn.loading .btnSvg {
    animation: flicker 2s linear infinite;
    animation-delay: 0.5s;
}

@keyframes flicker {
    50% {
        opacity: 0.3;
    }
}

/* Text Containers */
.txtWrapper {
    position: relative;
    display: flex;
    align-items: center;
    /* Min width to prevent layout shifts */
    min-width: 6em;
    justify-content: flex-start;
}

.txt1,
.txt2 {
    position: absolute;
    left: 0;
    white-space: nowrap;
    display: flex;
}

/* 
 Logic:
 Idle: txt1 visible, txt2 hidden
 Loading: txt1 (Generate) hidden, txt2 (Generating) visible & animating
 Success: txt1 (Generated) visible, txt2 hidden
 Error: txt1 (Failed) visible, txt2 hidden
*/

.txt1 {
    opacity: 1;
    transition: opacity 0.3s ease;
}

.btn.loading .txt1 {
    opacity: 0;
}

.txt2 {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.btn.loading .txt2 {
    opacity: 1;
}

/* Focused/Active animations mainly relevant for interaction, 
   but we are driving state via props mostly. 
   Keeping hover effects for polish. 
*/

.btn:active {
    border: solid 1px hsla(var(--highlight-color-hue), 100%, 80%, 70%);
    background-color: hsla(var(--highlight-color-hue), 50%, 20%, 0.5);
}

.btn:active::before {
    box-shadow:
        0 -8px 12px -6px rgba(255, 255, 255, 0.667) inset,
        0 -16px 16px -8px hsla(var(--highlight-color-hue), 100%, 70%, 80%) inset,
        1px 1px 1px rgba(255, 255, 255, 0.267),
        2px 2px 2px rgba(255, 255, 255, 0.133),
        -1px -1px 1px rgba(0, 0, 0, 0.133),
        -2px -2px 2px rgba(0, 0, 0, 0.067);
}

.btn:active::after {
    opacity: 1;
    mask-image: linear-gradient(0deg, #fff, transparent);
    filter: brightness(200%);
}

.btn:hover {
    border: solid 1px hsla(var(--highlight-color-hue), 100%, 80%, 40%);
}

.btn:hover::before {
    box-shadow:
        0 -8px 8px -6px rgba(255, 255, 255, 0.667) inset,
        0 -16px 16px -8px hsla(var(--highlight-color-hue), 100%, 70%, 30%) inset,
        1px 1px 1px rgba(255, 255, 255, 0.133),
        2px 2px 2px rgba(255, 255, 255, 0.067),
        -1px -1px 1px rgba(0, 0, 0, 0.133),
        -2px -2px 2px rgba(0, 0, 0, 0.067);
}

.btn:hover::after {
    opacity: 1;
    mask-image: linear-gradient(0deg, #fff, transparent);
}

.btn:hover .btnSvg {
    fill: #fff;
    filter: drop-shadow(0 0 3px hsl(var(--highlight-color-hue), 100%, 70%)) drop-shadow(0 -4px 6px #0009);
}

/* Staggered animation delays for loading text letters */
.btnLetter:nth-child(1) {
    animation-delay: 0s;
}

.btnLetter:nth-child(2) {
    animation-delay: 0.08s;
}

.btnLetter:nth-child(3) {
    animation-delay: 0.16s;
}

.btnLetter:nth-child(4) {
    animation-delay: 0.24s;
}

.btnLetter:nth-child(5) {
    animation-delay: 0.32s;
}

.btnLetter:nth-child(6) {
    animation-delay: 0.4s;
}

.btnLetter:nth-child(7) {
    animation-delay: 0.48s;
}

.btnLetter:nth-child(8) {
    animation-delay: 0.56s;
}

.btnLetter:nth-child(9) {
    animation-delay: 0.64s;
}

.btnLetter:nth-child(10) {
    animation-delay: 0.72s;
}

/* Disabled state */
.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    filter: grayscale(0.8);
}